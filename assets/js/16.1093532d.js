(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{291:function(t,s,a){"use strict";a.r(s);var r=a(13),n=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"二、javascript"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、javascript"}},[t._v("#")]),t._v(" 二、javaScript")]),t._v(" "),s("h4",{attrs:{id:"script-标签的属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#script-标签的属性"}},[t._v("#")]),t._v(" script 标签的属性")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("integrity")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("ul",[s("li",[s("p",[t._v("defer"),s("br"),t._v(" "),s("strong",[t._v("推迟")]),t._v("执行脚本，从上至下按顺序执行和下载，若多个推迟执行脚本，会按照"),s("strong",[t._v("顺序")]),t._v("执行")])]),t._v(" "),s("li",[s("p",[t._v("async"),s("br"),t._v(" "),s("strong",[t._v("异步")]),t._v("执行脚本，没有顺序影响，若有多个异步脚本引入，不能确保执行顺序")])]),t._v(" "),s("li",[s("p",[t._v("type"),s("br"),t._v("\n默认为 "),s("code",[t._v("'text/javascript'")]),t._v(" ，当使用导入导出 "),s("code",[t._v("export/import")]),t._v(" 时，可能会修改，变成 "),s("code",[t._v("'module'")])])]),t._v(" "),s("li",[s("p",[t._v("src"),s("br"),t._v("\n设置外部文件的源地址，"),s("strong",[t._v("脚本没有跨域限制")])])]),t._v(" "),s("li",[s("p",[t._v("integrity"),s("br"),t._v("\n因为没有跨域限制，所以为了防止同一个源地址的 js 文件被恶意修改，integrity 可以设置一个签名。\n对比 js 文件返回的签名，若不同则报错")])])]),t._v(" "),s("h4",{attrs:{id:"defer-和-async-的异同"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#defer-和-async-的异同"}},[t._v("#")]),t._v(" defer 和 async 的异同")]),t._v(" "),s("p",[t._v("同：都在"),s("strong",[t._v("引入")]),t._v("外部脚本时有效，在页面加载完才执行，不影响页面加载。")]),t._v(" "),s("p",[t._v("异：异步没有顺序可言，延迟还受顺序影响")]),t._v(" "),s("h4",{attrs:{id:"动态加载脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动态加载脚本"}},[t._v("#")]),t._v(" 动态加载脚本")]),t._v(" "),s("p",[t._v("即需要时使用 Document 动态创造 script 标签。")]),t._v(" "),s("p",[t._v("1，创建一个 script 节点")]),t._v(" "),s("p",[t._v("2，给该节点添加属性")]),t._v(" "),s("p",[t._v("3，将节点加入到 dom 结构中")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" script "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("当动态加载资源时，需要让浏览器有所准备，提前下载，故需设置"),s("strong",[t._v("浏览器预加载器")]),t._v("。")]),t._v(" "),s("p",[t._v("且有多个动态脚本时，浏览器无法确认该资源优先级，需让预加载器知道资源的优先级。")]),t._v(" "),s("p",[t._v("这里有两个概念：资源优先级和浏览器预加载器。")]),t._v(" "),s("h4",{attrs:{id:"资源优先级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#资源优先级"}},[t._v("#")]),t._v(" 资源优先级")]),t._v(" "),s("p",[t._v("浏览器对所有资源进行划分优先级，并按优先级顺序加载资源。")]),t._v(" "),s("p",[t._v("优先级包含：Highest、High、Medium、Low、Lowest。")]),t._v(" "),s("p",[t._v("css、html 优先级最高，为 Highest；")]),t._v(" "),s("p",[t._v("font 资源优先级为 Highest/High；")]),t._v(" "),s("p",[t._v("图片资源，如果出现在"),s("strong",[t._v("视口")]),t._v("中，则优先级为 High，否则为 Low；")]),t._v(" "),s("p",[t._v("而 script 脚本优先级不一：")]),t._v(" "),s("ul",[s("li",[t._v("在"),s("strong",[t._v("第一个图片资源")]),t._v("之前阻塞的脚本在优先级中是 High")]),t._v(" "),s("li",[t._v("在第一个图片资源之后阻塞的脚本在优先级中是 Medium")]),t._v(" "),s("li",[t._v("异步/延迟/插入的脚本（无论在什么位置）在网络优先级中是 Low")])]),t._v(" "),s("h5",{attrs:{id:"浏览器预加载器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器预加载器"}},[t._v("#")]),t._v(" 浏览器预加载器")]),t._v(" "),s("p",[t._v("通过 "),s("code",[t._v("link")]),t._v(" 标签构造预加载器，将 "),s("code",[t._v("rel")]),t._v(" 属性设置为 "),s("code",[t._v("preload")]),t._v(" 或 "),s("code",[t._v("prefetch")]),t._v(" 。")]),t._v(" "),s("p",[t._v("在 vue 项目中进行打包上线之后，"),s("code",[t._v("index.html")]),t._v(" 存在一些对 css 和 js 资源进行预加载的 "),s("code",[t._v("link")]),t._v(" 标签。")]),t._v(" "),s("p",[t._v("若有多个预加载器时，设置 as 属性，表示该资源是什么类型，以便浏览器按优先级加载。")]),t._v(" "),s("ul",[s("li",[t._v("rel"),s("br"),t._v("\npreload 主要用于预加载"),s("strong",[t._v("当前页面")]),t._v("需要的资源；"),s("br"),t._v("\nprefetch 主要用于加载"),s("strong",[t._v("将来页面")]),t._v("可能需要的资源；")]),t._v(" "),s("li",[t._v("as"),s("br"),t._v("\n值为资源类型的字符串。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("link rel"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'preload'")]),t._v(" href"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.js'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 预加载 index.js，且此资源是 script 脚本")]),t._v("\n")])])]),s("h4",{attrs:{id:"js-补充"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js-补充"}},[t._v("#")]),t._v(" js 补充")]),t._v(" "),s("ul",[s("li",[t._v("行内脚本（即在 script 标签中写逻辑）的缺点\n1，不能使用"),s("code",[t._v("</>")]),t._v("字符串，当做脚本结束标签，需要使用转义字符变成"),s("code",[t._v("<\\/script>")]),t._v("\n2，在 XTML 标签中，将 < （小于号）当做标签\n3，页面间脚本代码不互通，即多个页面使用同一段代码时，造成资源浪费\n4，在 head 标签中使用脚本，脚本代码没有加载完，页面也不会执行")]),t._v(" "),s("li",[t._v("外部文件脚本的优点\n1，多个页面使用，文件只下载一次\n2，设置了 defer/async 的外部脚本文件不会影响页面加载")]),t._v(" "),s("li",[t._v("noscript 标签\n在不支持脚本的页面中显示标签内容，支持脚本的浏览器"),s("strong",[t._v("永远不")]),t._v("显示")])])])}),[],!1,null,null,null);s.default=n.exports}}]);