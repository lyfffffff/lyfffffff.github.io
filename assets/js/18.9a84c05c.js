(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{295:function(t,e,o){"use strict";o.r(e);var v=o(13),a=Object(v.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"二十五、客户端储存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十五、客户端储存"}},[t._v("#")]),t._v(" 二十五、客户端储存")]),t._v(" "),e("h3",{attrs:{id:"cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" cookie")]),t._v(" "),e("p",[t._v("服务器在响应头 Response headers 中在 Set-Cookie 传输 cookie 信息，浏览器自动将其存储，cookie 会在每次进行请求（合法域）时携带在 Request headers 中的 Cookie 属性中。对于没设置 httponly 属性的 cookie 来说")]),t._v(" "),e("h4",{attrs:{id:"cookie-的结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie-的结构"}},[t._v("#")]),t._v(" cookie 的结构")]),t._v(" "),e("p",[t._v("12 个字段。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("字段")]),t._v(" "),e("th",[t._v("name")]),t._v(" "),e("th",[t._v("作用")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("名称")]),t._v(" "),e("td",[t._v("name")]),t._v(" "),e("td",[t._v("单个 cookie 的名称，不区分大小写，不可修改")])]),t._v(" "),e("tr",[e("td",[t._v("值")]),t._v(" "),e("td",[t._v("value")]),t._v(" "),e("td",[t._v("字符串，cookie 的值")])]),t._v(" "),e("tr",[e("td",[t._v("域")]),t._v(" "),e("td",[t._v("domain")]),t._v(" "),e("td",[t._v("cookie 有效的域，只有在该域下发送 cookie")])]),t._v(" "),e("tr",[e("td",[t._v("路径")]),t._v(" "),e("td",[t._v("path")]),t._v(" "),e("td",[t._v("在合法域中，只有在此路径下，cookie 才发送，一般默认为所有 "),e("code",[t._v("/")])])]),t._v(" "),e("tr",[e("td",[t._v("过期时间")]),t._v(" "),e("td",[t._v("Max-Age/expires")]),t._v(" "),e("td",[t._v("为一个时间戳，默认为 "),e("code",[t._v("Seccion")]),t._v("，即和 SeccionStorage 一样，在浏览器关闭后删除 cookie")])]),t._v(" "),e("tr",[e("td",[t._v("大小")]),t._v(" "),e("td",[t._v("size")]),t._v(" "),e("td",[t._v("cookie 是一个文件，固有大小")])]),t._v(" "),e("tr",[e("td",[t._v("http")]),t._v(" "),e("td",[t._v("httpOnly")]),t._v(" "),e("td",[t._v("一个布尔值，若为 true，表示 cookie 只是请求的属性，而不能通过 document.cookie 来访问")])]),t._v(" "),e("tr",[e("td",[t._v("安全标志")]),t._v(" "),e("td",[t._v("secure")]),t._v(" "),e("td",[t._v("布尔值，当为 true 时，表示请求需配置 SSL 证书")])]),t._v(" "),e("tr",[e("td",[t._v("相同站点")]),t._v(" "),e("td",[t._v("samesite")]),t._v(" "),e("td",[t._v("是否向第三方站点发送 cookie，"),e("code",[t._v("Strict")]),t._v(" 表示从不向第三方站点发送 cookies，"),e("code",[t._v("Lax")]),t._v(" 为默认值，表示不向第三方站点发送 post 请求，"),e("code",[t._v("None")]),t._v("表示只向有 SSL 证书的第三方站点发送 cookie")])]),t._v(" "),e("tr",[e("td",[t._v("相同站点 2.0")]),t._v(" "),e("td",[t._v("sameparty")]),t._v(" "),e("td",[t._v("First-Party Sets 策略允许表示设置此属性的 cookie 将由不同域名都视为第一方")])]),t._v(" "),e("tr",[e("td",[t._v("优先级")]),t._v(" "),e("td",[t._v("priority")]),t._v(" "),e("td",[t._v("当 cookies 超过内存时，会将优先级低的 cookies 删除，若都是同一等级，年纪越大，删除优先级也高")])])])]),t._v(" "),e("h4",{attrs:{id:"document-cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#document-cookie"}},[t._v("#")]),t._v(" document.cookie")]),t._v(" "),e("p",[t._v('为一个字符串，以分号分割包含所有 cookie 信息，也是键值对，如 "name=value; name=value"。')]),t._v(" "),e("p",[t._v("通过赋值，可以添加/修改 cookie，但不清除原有的 cookie，且可以添加 name、value 以外的其他属性。")]),t._v(" "),e("p",[t._v("但是最好使用 encodeURIComponent() 对 cookie 的名称和值进行编码：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"="')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lyf"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('";"')]),t._v("\n")])])]),e("h4",{attrs:{id:"子-cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#子-cookie"}},[t._v("#")]),t._v(" 子 cookie")]),t._v(" "),e("p",[t._v('本质是在 cookie 中利用值再次存储键值对，如："name=name1=value1&name2=value2"，名为 "name" 的 cookie 有 "name1" 和 "name2" 两个子 cookie。')])])}),[],!1,null,null,null);e.default=a.exports}}]);