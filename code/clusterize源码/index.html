<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1 前言 | LYFFFF 的博客呀</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="./public/logo.webp">
    <meta name="description" content="道阻且长，勤能补拙">
    
    <link rel="preload" href="/assets/css/0.styles.9825735b.css" as="style"><link rel="preload" href="/assets/js/app.caadd38c.js" as="script"><link rel="preload" href="/assets/js/2.2defd20b.js" as="script"><link rel="preload" href="/assets/js/12.c2622d7c.js" as="script"><link rel="prefetch" href="/assets/js/10.097aea1a.js"><link rel="prefetch" href="/assets/js/11.c2c5675c.js"><link rel="prefetch" href="/assets/js/13.00665759.js"><link rel="prefetch" href="/assets/js/14.4659e7b2.js"><link rel="prefetch" href="/assets/js/15.c34835e2.js"><link rel="prefetch" href="/assets/js/16.1093532d.js"><link rel="prefetch" href="/assets/js/17.1fff1e75.js"><link rel="prefetch" href="/assets/js/18.9a84c05c.js"><link rel="prefetch" href="/assets/js/19.9837b8ba.js"><link rel="prefetch" href="/assets/js/20.0b8189fb.js"><link rel="prefetch" href="/assets/js/21.dc29329c.js"><link rel="prefetch" href="/assets/js/22.e4101b35.js"><link rel="prefetch" href="/assets/js/23.8a7bb0ad.js"><link rel="prefetch" href="/assets/js/24.01fb6d46.js"><link rel="prefetch" href="/assets/js/25.b102803a.js"><link rel="prefetch" href="/assets/js/26.f820b976.js"><link rel="prefetch" href="/assets/js/27.bf356171.js"><link rel="prefetch" href="/assets/js/28.23d385bd.js"><link rel="prefetch" href="/assets/js/29.b57552f4.js"><link rel="prefetch" href="/assets/js/3.f9cd476e.js"><link rel="prefetch" href="/assets/js/30.eb70eecb.js"><link rel="prefetch" href="/assets/js/31.575e2c13.js"><link rel="prefetch" href="/assets/js/32.bce33679.js"><link rel="prefetch" href="/assets/js/33.0bd8f6cb.js"><link rel="prefetch" href="/assets/js/34.f33fa1b5.js"><link rel="prefetch" href="/assets/js/35.9cabab55.js"><link rel="prefetch" href="/assets/js/36.770a3e3f.js"><link rel="prefetch" href="/assets/js/37.d0599fe3.js"><link rel="prefetch" href="/assets/js/38.7099a479.js"><link rel="prefetch" href="/assets/js/39.e9ee67e8.js"><link rel="prefetch" href="/assets/js/4.11957e18.js"><link rel="prefetch" href="/assets/js/40.cc0ea31c.js"><link rel="prefetch" href="/assets/js/41.87e19d2c.js"><link rel="prefetch" href="/assets/js/42.ffa0b4fc.js"><link rel="prefetch" href="/assets/js/43.0c185241.js"><link rel="prefetch" href="/assets/js/5.e5b70a6f.js"><link rel="prefetch" href="/assets/js/6.4169e03e.js"><link rel="prefetch" href="/assets/js/7.c3602c94.js"><link rel="prefetch" href="/assets/js/8.ec3ff6fe.js"><link rel="prefetch" href="/assets/js/9.48df350d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9825735b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LYFFFF 的博客呀</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Hmoe
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/note/正则表达式/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/note/客户端存储/" class="nav-link">
  客户端存储
</a></li><li class="dropdown-item"><!----> <a href="/note/模块化/" class="nav-link">
  模块化
</a></li><li class="dropdown-item"><!----> <a href="/note/渲染式组件/" class="nav-link">
  渲染式组件
</a></li><li class="dropdown-item"><!----> <a href="/note/原型和原型链/" class="nav-link">
  原型和原型链
</a></li><li class="dropdown-item"><!----> <a href="/note/组件传值/" class="nav-link">
  组件传值
</a></li><li class="dropdown-item"><!----> <a href="/note/Reflect/" class="nav-link">
  Reflect
</a></li><li class="dropdown-item"><!----> <a href="/note/Vue响应式原理/" class="nav-link">
  Vue响应式原理
</a></li><li class="dropdown-item"><!----> <a href="/note/VueRouter/" class="nav-link">
  VueRouter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码分析" class="dropdown-title"><span class="title">源码分析</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码分析" class="mobile-dropdown-title"><span class="title">源码分析</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/clusterize源码/" class="nav-link">
  clusterize源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js高级设计4" class="dropdown-title"><span class="title">js高级设计4</span> <span class="arrow down"></span></button> <button type="button" aria-label="js高级设计4" class="mobile-dropdown-title"><span class="title">js高级设计4</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js4/二、javascript/" class="nav-link">
  二、javascript
</a></li><li class="dropdown-item"><!----> <a href="/js4/三、语言语法/" class="nav-link">
  三、语言语法
</a></li><li class="dropdown-item"><!----> <a href="/js4/四、变量作用域和内存/" class="nav-link">
  四、变量作用域和内存
</a></li><li class="dropdown-item"><!----> <a href="/js4/五、基本引用类型/" class="nav-link">
  五、基本引用类型
</a></li><li class="dropdown-item"><!----> <a href="/js4/六、集合引用类型/" class="nav-link">
  六、集合引用类型
</a></li><li class="dropdown-item"><!----> <a href="/js4/七、迭代器与生成器/" class="nav-link">
  七、迭代器与生成器
</a></li><li class="dropdown-item"><!----> <a href="/js4/八、类和对象以及面向对象编程/" class="nav-link">
  八、类和对象以及面向对象编程
</a></li><li class="dropdown-item"><!----> <a href="/js4/九、代理和反射/" class="nav-link">
  九、代理和反射
</a></li><li class="dropdown-item"><!----> <a href="/js4/十、函数/" class="nav-link">
  十、函数
</a></li><li class="dropdown-item"><!----> <a href="/js4/十一、期约和异步函数/" class="nav-link">
  十一、期约和异步函数
</a></li><li class="dropdown-item"><!----> <a href="/js4/十二、BOM/" class="nav-link">
  十二、BOM
</a></li><li class="dropdown-item"><!----> <a href="/js4/十三、客户端检测/" class="nav-link">
  十三、客户端检测
</a></li><li class="dropdown-item"><!----> <a href="/js4/十四、DOM/" class="nav-link">
  十四、DOM
</a></li><li class="dropdown-item"><!----> <a href="/js4/十五、DOM 扩展/" class="nav-link">
  十五、DOM 扩展
</a></li><li class="dropdown-item"><!----> <a href="/js4/十六、DOM2 和 DOM3/" class="nav-link">
  十六、DOM2 和 DOM3
</a></li><li class="dropdown-item"><!----> <a href="/js4/十七、事件/" class="nav-link">
  十七、事件
</a></li><li class="dropdown-item"><!----> <a href="/js4/十八、图形与Canvas/" class="nav-link">
  十八、图形与Canvas
</a></li><li class="dropdown-item"><!----> <a href="/js4/十九、表单脚本/" class="nav-link">
  十九、表单脚本
</a></li><li class="dropdown-item"><!----> <a href="/js4/二十、JavaScript API/" class="nav-link">
  二十、JavaScript API
</a></li><li class="dropdown-item"><!----> <a href="/js4/二十五、客户端储存/" class="nav-link">
  二十五、客户端储存
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lyfffffff" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/LYFFFF_" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSND
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Hmoe
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/note/正则表达式/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/note/客户端存储/" class="nav-link">
  客户端存储
</a></li><li class="dropdown-item"><!----> <a href="/note/模块化/" class="nav-link">
  模块化
</a></li><li class="dropdown-item"><!----> <a href="/note/渲染式组件/" class="nav-link">
  渲染式组件
</a></li><li class="dropdown-item"><!----> <a href="/note/原型和原型链/" class="nav-link">
  原型和原型链
</a></li><li class="dropdown-item"><!----> <a href="/note/组件传值/" class="nav-link">
  组件传值
</a></li><li class="dropdown-item"><!----> <a href="/note/Reflect/" class="nav-link">
  Reflect
</a></li><li class="dropdown-item"><!----> <a href="/note/Vue响应式原理/" class="nav-link">
  Vue响应式原理
</a></li><li class="dropdown-item"><!----> <a href="/note/VueRouter/" class="nav-link">
  VueRouter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码分析" class="dropdown-title"><span class="title">源码分析</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码分析" class="mobile-dropdown-title"><span class="title">源码分析</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/clusterize源码/" class="nav-link">
  clusterize源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js高级设计4" class="dropdown-title"><span class="title">js高级设计4</span> <span class="arrow down"></span></button> <button type="button" aria-label="js高级设计4" class="mobile-dropdown-title"><span class="title">js高级设计4</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js4/二、javascript/" class="nav-link">
  二、javascript
</a></li><li class="dropdown-item"><!----> <a href="/js4/三、语言语法/" class="nav-link">
  三、语言语法
</a></li><li class="dropdown-item"><!----> <a href="/js4/四、变量作用域和内存/" class="nav-link">
  四、变量作用域和内存
</a></li><li class="dropdown-item"><!----> <a href="/js4/五、基本引用类型/" class="nav-link">
  五、基本引用类型
</a></li><li class="dropdown-item"><!----> <a href="/js4/六、集合引用类型/" class="nav-link">
  六、集合引用类型
</a></li><li class="dropdown-item"><!----> <a href="/js4/七、迭代器与生成器/" class="nav-link">
  七、迭代器与生成器
</a></li><li class="dropdown-item"><!----> <a href="/js4/八、类和对象以及面向对象编程/" class="nav-link">
  八、类和对象以及面向对象编程
</a></li><li class="dropdown-item"><!----> <a href="/js4/九、代理和反射/" class="nav-link">
  九、代理和反射
</a></li><li class="dropdown-item"><!----> <a href="/js4/十、函数/" class="nav-link">
  十、函数
</a></li><li class="dropdown-item"><!----> <a href="/js4/十一、期约和异步函数/" class="nav-link">
  十一、期约和异步函数
</a></li><li class="dropdown-item"><!----> <a href="/js4/十二、BOM/" class="nav-link">
  十二、BOM
</a></li><li class="dropdown-item"><!----> <a href="/js4/十三、客户端检测/" class="nav-link">
  十三、客户端检测
</a></li><li class="dropdown-item"><!----> <a href="/js4/十四、DOM/" class="nav-link">
  十四、DOM
</a></li><li class="dropdown-item"><!----> <a href="/js4/十五、DOM 扩展/" class="nav-link">
  十五、DOM 扩展
</a></li><li class="dropdown-item"><!----> <a href="/js4/十六、DOM2 和 DOM3/" class="nav-link">
  十六、DOM2 和 DOM3
</a></li><li class="dropdown-item"><!----> <a href="/js4/十七、事件/" class="nav-link">
  十七、事件
</a></li><li class="dropdown-item"><!----> <a href="/js4/十八、图形与Canvas/" class="nav-link">
  十八、图形与Canvas
</a></li><li class="dropdown-item"><!----> <a href="/js4/十九、表单脚本/" class="nav-link">
  十九、表单脚本
</a></li><li class="dropdown-item"><!----> <a href="/js4/二十、JavaScript API/" class="nav-link">
  二十、JavaScript API
</a></li><li class="dropdown-item"><!----> <a href="/js4/二十五、客户端储存/" class="nav-link">
  二十五、客户端储存
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lyfffffff" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/LYFFFF_" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSND
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/code/clusterize%E6%BA%90%E7%A0%81/" aria-current="page" class="active sidebar-link">clusterize源码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/code/clusterize%E6%BA%90%E7%A0%81/#_1-1-主要思想" class="sidebar-link">1.1 主要思想</a></li><li class="sidebar-sub-header"><a href="/code/clusterize%E6%BA%90%E7%A0%81/#_1-2-用法" class="sidebar-link">1.2 用法</a></li><li class="sidebar-sub-header"><a href="/code/clusterize%E6%BA%90%E7%A0%81/#_2-1-准备工作" class="sidebar-link">2.1 准备工作</a></li><li class="sidebar-sub-header"><a href="/code/clusterize%E6%BA%90%E7%A0%81/#_2-2-核心代码" class="sidebar-link">2.2 核心代码</a></li><li class="sidebar-sub-header"><a href="/code/clusterize%E6%BA%90%E7%A0%81/#附加" class="sidebar-link">附加</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-前言"><a href="#_1-前言" class="header-anchor">#</a> 1 前言</h1> <h2 id="_1-1-主要思想"><a href="#_1-1-主要思想" class="header-anchor">#</a> 1.1 主要思想</h2> <ol><li>不渲染所有的 DOM</li> <li>它将列表拆分为 cluster ，然后显示当前滚动位置的元素</li> <li>并在列表的顶部和底部添加额外的行来模拟表格的全高度</li> <li>这样浏览器就会像显示完整列表一样显示滚动条</li></ol> <h2 id="_1-2-用法"><a href="#_1-2-用法" class="header-anchor">#</a> 1.2 用法</h2> <p><a href="https://clusterize.js.org/" target="_blank" rel="noopener noreferrer">clusterize.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scrollArea<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contentArea<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'&lt;tr&gt;…&lt;/tr&gt;'</span><span class="token punctuation">,</span> <span class="token string">'&lt;tr&gt;…&lt;/tr&gt;'</span><span class="token punctuation">,</span> …<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> clusterize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Clusterize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">rows</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
  <span class="token literal-property property">scrollId</span><span class="token operator">:</span> <span class="token string">'scrollArea'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">contentId</span><span class="token operator">:</span> <span class="token string">'contentArea'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-options"><a href="#_1-options" class="header-anchor">#</a> 1. options</h3> <p>单次仅会渲染条数 = 一块的行数 * 集群中的块数</p> <table><thead><tr><th style="text-align:center;">Name</th> <th style="text-align:center;">Require</th> <th>描述</th></tr></thead> <tbody><tr><td style="text-align:center;">rows</td> <td style="text-align:center;">取决于</td> <td>1. 存在现有的标记就不需要；2. 通过接收数据渲染则需要</td></tr> <tr><td style="text-align:center;">scrollId</td> <td style="text-align:center;">必需</td> <td>用作滚动区域的父标签的 Id 或 DOM 节点</td></tr> <tr><td style="text-align:center;">contentId</td> <td style="text-align:center;">必需</td> <td>将放置内容的标签的 ID 或 DOM 节点</td></tr> <tr><td style="text-align:center;">rows_in_block</td> <td style="text-align:center;">可选的</td> <td>块中的行数 默认50</td></tr> <tr><td style="text-align:center;">blocks_in_cluster</td> <td style="text-align:center;">可选的</td> <td>集群中的块数 默认4</td></tr> <tr><td style="text-align:center;">tag</td> <td style="text-align:center;">可选的</td> <td>支持的元素：间隔额外的行，空数据行 默认空</td></tr> <tr><td style="text-align:center;">show_no_data_row</td> <td style="text-align:center;">可选的</td> <td>无数据时是否显示“空”占位符行 默认true</td></tr> <tr><td style="text-align:center;">no_data_class</td> <td style="text-align:center;">可选的</td> <td>无数据时的占位符内容 默认“无数据”</td></tr> <tr><td style="text-align:center;">no_data_text</td> <td style="text-align:center;">可选的</td> <td>无数据时的占位符类名 默认“clusterize-no-data”</td></tr> <tr><td style="text-align:center;">keep_parity</td> <td style="text-align:center;">可选的</td> <td>添加额外的标签以保持行的奇偶性 默认 true</td></tr> <tr><td style="text-align:center;">callbacks</td> <td style="text-align:center;">可选的</td> <td></td></tr></tbody></table> <ul><li>callbacks 的属性
<ul><li>clusterWillChange：新集群替换旧集群之前触发</li> <li>clusterChanged：新集群替换旧集群后触发</li> <li>scrollingProgress：滚动时触发，返回滚动进度位置</li></ul></li></ul> <h3 id="_2-methods"><a href="#_2-methods" class="header-anchor">#</a> 2. methods</h3> <table><thead><tr><th style="text-align:center;">Name</th> <th>参数</th> <th>描述</th></tr></thead> <tbody><tr><td style="text-align:center;">.update()</td> <td>array</td> <td>数据更新时列表更新</td></tr> <tr><td style="text-align:center;">.append()</td> <td>array</td> <td>追加新数据到列表中</td></tr> <tr><td style="text-align:center;">.prepend()</td> <td>array</td> <td>添加新数据到列表中</td></tr> <tr><td style="text-align:center;">.refresh()</td> <td>boolean</td> <td>刷新行高 Clusterize必须始终知道当前行高</td></tr> <tr><td style="text-align:center;">.getRowsAmount()</td> <td></td> <td>获取总行数</td></tr> <tr><td style="text-align:center;">.getScrollProgress()</td> <td></td> <td>获取当前滚动进度</td></tr> <tr><td style="text-align:center;">.clear()</td> <td></td> <td>清除列表</td></tr> <tr><td style="text-align:center;">.destroy()</td> <td>boolean</td> <td>销毁 clusterize实例 参数为true时从列表中删除所有数据，不指定or false则将所有隐藏数据插入列表</td></tr></tbody></table> <h1 id="_2-源码分析"><a href="#_2-源码分析" class="header-anchor">#</a> 2 源码分析</h1> <h2 id="_2-1-准备工作"><a href="#_2-1-准备工作" class="header-anchor">#</a> 2.1 准备工作</h2> <h3 id="_1-iife-立即执行函数-避免污染全局环境"><a href="#_1-iife-立即执行函数-避免污染全局环境" class="header-anchor">#</a> 1. IIFE 立即执行函数 -- 避免污染全局环境</h3> <ul><li>自执行匿名函数 <code>(function() {})()</code> <ol><li>匿名函数 <code>function() {}</code> 拥有独立的词法作用域</li> <li>再一次使用 () 创建了一个立即执行函数表达式，js 引擎到此将直接执行函数</li></ol></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>闭包前写 ; 是为了防止代码压缩时，前面代码没写 ; 造成报错</p></blockquote> <h3 id="_2-匿名函数-定义一个适应所有环境的-js-模块"><a href="#_2-匿名函数-定义一个适应所有环境的-js-模块" class="header-anchor">#</a> 2. 匿名函数 -- 定义一个适应所有环境的 js 模块</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> definition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">!=</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">definition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">==</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> define<span class="token punctuation">.</span>amd <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">define</span><span class="token punctuation">(</span>definition<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">definition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>typeof module != 'undefined'</code> ：使用 Commonjs 规范导出，能在 nodejs 中引入</li> <li><code>typeof define == 'function' &amp;&amp; typeof define.amd == 'obj'</code>：使用 AMD 规范导出，能在浏览器引入</li> <li>其它：直接放在全局对象上</li></ul> <h3 id="_3-传入的-definition-函数"><a href="#_3-传入的-definition-函数" class="header-anchor">#</a> 3. 传入的 definition 函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 检测ie版本</span>
  <span class="token keyword">var</span> ie <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/** ... */</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// 检测mac版本</span>
  <span class="token keyword">var</span> is_mac <span class="token operator">=</span> <span class="token operator">...</span>

  <span class="token comment">//  核心代码</span>
  <span class="token keyword">var</span> <span class="token function-variable function">Clusterize</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
  <span class="token class-name">Clusterize</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

  <span class="token comment">// 解决兼容问题的函数</span>
  <span class="token comment">// 用于 绑定事件 的函数</span>
  <span class="token keyword">function</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> element<span class="token punctuation">,</span> fnc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/** ... */</span> <span class="token punctuation">}</span>
  <span class="token comment">// 用于 解绑事件 的函数</span>
  <span class="token keyword">function</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> element<span class="token punctuation">,</span> fnc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/** ... */</span> <span class="token punctuation">}</span>
  <span class="token comment">// 用于判断是否数组</span>
  <span class="token keyword">function</span> <span class="token function">isArray</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/** ... */</span> <span class="token punctuation">}</span>
  <span class="token comment">// 用于获取元素的样式</span>
  <span class="token keyword">function</span> <span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">,</span> elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/** ... */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-2-核心代码"><a href="#_2-2-核心代码" class="header-anchor">#</a> 2.2 核心代码</h2> <h3 id="_1-自定义构造函数方式创建对象"><a href="#_1-自定义构造函数方式创建对象" class="header-anchor">#</a> 1. 自定义构造函数方式创建对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">Clusterize</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Clusterize</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>构造函数上主要定义 -- 被实例对象访问的属性和方法</li> <li>原型对象上主要定义 -- 被构造函数访问的方法</li></ul> <h3 id="_2-clusterize-构造函数"><a href="#_2-clusterize-构造函数" class="header-anchor">#</a> 2. Clusterize 构造函数</h3> <h4 id="流程"><a href="#流程" class="header-anchor">#</a> 流程</h4> <ol><li>定义全局属性 <code>options</code> -- 使用传入的值 | 设置默认值</li> <li>获取传入的 <code>scrollId</code> <code>contentId</code> 绑定的元素</li> <li><code>tabindex</code> 令浏览器关注滚动列表</li> <li>定义私有参数 <code>rows</code> <code>cache</code> <code>scroll_top</code></li> <li>添加初始数据</li> <li>恢复滚动位置</li> <li>添加 <code>scroll</code> 事件 <code>resize</code> 事件</li> <li>定义全局方法</li></ol> <h4 id="预备"><a href="#预备" class="header-anchor">#</a> 预备</h4> <ol><li><code>this instanceof Clusterize</code></li></ol> <ul><li>通过 <code>this instanceof xxx</code> 来判断有没有用 new 关键词调用</li></ul> <blockquote><p>Clusterize 的原型对象在 this 的原型链上</p></blockquote> <ul><li>为了防止不是 <code>new Clusterize()</code> 方式创建对象而是直接 <code>Clusterize()</code> 调用函数出现错误</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Clusterize</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Clusterize</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li><code>var self = this;</code></li></ol> <ul><li>很常见的避免 <code>this</code> 指向不明确不能直接拿到实例上的属性</li></ul> <h4 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h4> <ol><li><p><code>self.options</code></p> <ul><li>为实例创建时没设置的属性设置默认值 + 设置的属性值 写入 <code>self.options</code></li></ul></li> <li><p><code>self.scollId_elem self.contentId_elem</code></p> <ul><li>获取传入的 <code>scrollId contentId</code> 绑定的元素</li></ul></li> <li><p><code>self.contentId_elem</code> 元素设置属性 <code>tabindex</code></p> <ul><li>使用 <code>tabindex</code> 使得用户能够通过键盘 <code>tab</code> 键关注（聚焦）滚动列表</li></ul></li> <li><p><code>scrollTop</code> 获取 <code>self.contentId_elem</code> 元素顶部与可视区顶部的距离</p></li> <li><p><code>scroll</code> 事件</p> <ul><li>修复了Mac上的滚动问题--使用防抖 只触发50ms内的最后一次滚动</li> <li>集群号发生变化时 -- 检测数据变化并插入到DOM</li> <li>有传入滚动时触发回调，则返回滚动进度位置</li></ul></li> <li><p><code>resize</code> 事件</p> <ul><li>设置开关 -- 只触发 100ms 内的最后一次</li></ul></li></ol> <h4 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h4> <ol><li><p><code>destory()</code></p> <ul><li>事件解绑</li> <li>置空列表数据 | 将所有隐藏数据插入列表</li></ul></li> <li><p><code>refresh()</code></p> <ul><li>单行高有变化时 || 强制刷新行高时 --&gt; 更新列表</li></ul></li></ol> <blockquote><p>怎样判断行高是否变化呢？</p></blockquote> <ol start="3"><li><p><code>update()</code></p> <ol><li>获取滚动进度暂存</li> <li>行数 * 单行高 &lt; 元素顶部与可视区顶部的距离 时
<ul><li>重置滚动距离为0 重置当前集群号为0</li></ul></li> <li>检测数据变化并插入到DOM</li> <li>恢复滚动进度</li></ol></li> <li><p>其他方法</p></li></ol> <ul><li><code>clear()</code></li> <li><code>getRowsAmount()</code></li> <li><code>getScrollProgress()</code></li> <li><code>append()</code></li> <li><code>prepend()</code></li></ul> <h3 id="_3-clusterize-prototype-原型对象"><a href="#_3-clusterize-prototype-原型对象" class="header-anchor">#</a> 3. Clusterize.prototype 原型对象</h3> <h4 id="_1-getrowsheight"><a href="#_1-getrowsheight" class="header-anchor">#</a> 1. <code>getRowsHeight()</code></h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 写入单行高、单块高、总行数、集群高度 + 判断单行高是否变化
 * @param {array} rows 组件接收到的数据列表
 * @return {boolean} 集群高度变化则返回true
 * */</span> 
</code></pre></div><ol><li>一行高 <code>item_height</code>：获取该元素的高度
<ul><li>表格：考虑单元格的边距 -- <code>item_height = 元素高度 + 相邻单元格边框之间的距离</code></li> <li>非表格：考虑外边距 -- <code>item_height = 元素高度 + max(top外边距, bottom外边距)</code></li></ul></li> <li>一块高 <code>block_height = 单行高 * 块中的行数</code></li> <li>总行数 <code>rows_in_cluster = 集群中的块数 * 块中的行数</code></li> <li>集群高度 <code>cluster_height = 集群中的块数 * 单块高</code></li></ol> <ul><li>返回值
<ul><li>单行高变化时返回 <code>true</code></li></ul></li></ul> <h4 id="_2-inserttodom-检测数据变化并插入到dom"><a href="#_2-inserttodom-检测数据变化并插入到dom" class="header-anchor">#</a> 2. <code>insertToDOM()</code> 检测数据变化并插入到DOM</h4> <blockquote><p>初始化时 翻页 页码发生改变时 集群号改变时 触发</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 检测数据变化并插入到DOM
 * @param {array} rows 接收到的数据列表
 * @param {object} cache 当前展示的数据
 * @return {object} 
 * */</span> 
</code></pre></div><ol><li>获取集群高度</li> <li>比较 当前展示的数据 与 接收到的数据的 变化
<ul><li>当前集群的数据是否变化</li> <li>集群以上未渲染数据的高度是否变化</li> <li>集群以下未渲染数据的高度是否变化</li></ul></li> <li>当前集群的数据变化 || 集群以上未渲染数据的高度变化时 写入 <code>content_elem</code> 的后代元素
<ol><li>存在 集群以上未渲染数据的高度变化 -- 创建标签
<ul><li>需要添加额外的标签时，创建额外的行</li> <li><code>layout.push(&lt;tr class=&quot;clusterize-extra-row clusterize-top-space&quot; style=&quot;集群以上未渲染数据的高度&quot;&gt;&lt;/tr&gt;)</code></li></ul></li> <li>创建标签 <code>&lt;tr&gt;当前集群的数据&lt;/tr&gt;</code></li> <li>存在 集群以下未渲染数据时，创建标签
<ul><li><code>layout.push(&lt;tr class=&quot;clusterize-extra-row clusterize-top-space&quot; style=&quot;集群以下未渲染数据的高度&quot;&gt;&lt;/tr&gt;)</code></li></ul></li> <li>触发 传入的回调的函数 -- 替换前触发函数</li> <li>设置 <code>content_elem</code> 元素的后代元素：<code>this.html(layout.join(''))</code></li> <li>css 相关</li> <li>触发 传入的回调的函数 -- 替换后触发函数</li></ol></li> <li>集群以下未渲染数据的高度变化时 写入content_elem的后代元素
<ul><li><code>content_elem</code> 元素追加子节点 <code>&lt;tr style=&quot;集群以下未渲染数据的高度&quot;&gt;&lt;/tr&gt;</code></li></ul></li></ol> <blockquote><ol><li>怎样写入后代元素</li> <li>怎样获取 集群以上未渲染数据，集群以下未渲染数据，需要展示的数据 ？</li></ol></blockquote> <h4 id="_3-html-设置-content-elem-元素的后代元素"><a href="#_3-html-设置-content-elem-元素的后代元素" class="header-anchor">#</a> 3. <code>html()</code> 设置 <code>content_elem</code> 元素的后代元素</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 将数据列表写入tbody -- 适配 ie &lt;= 9不允许对表元素使用 innerHTML
 * @param {array} data 数据列表
 * @return void
 * */</span> 
</code></pre></div><ul><li><code>content_elem.innerHTML = data</code></li></ul> <h5 id="兼容-ie9以下版本"><a href="#兼容-ie9以下版本" class="header-anchor">#</a> 兼容 ie9以下版本</h5> <blockquote><p>ie &lt;= 9不允许对表元素使用 innerHTML</p></blockquote> <ol><li>使用 <code>ele.removeChild()</code> 将 <code>content_elem</code> 的子元素全部移除</li> <li>将包含所有子元素的字符串截取出来 --&gt; 转化为数组</li> <li>使用 <code>ele.appendChild()</code> 将 <code>content_elem</code> 的子元素写入</li></ol> <h4 id="_4-generate-为当前滚动位置生成集群"><a href="#_4-generate-为当前滚动位置生成集群" class="header-anchor">#</a> 4. <code>generate()</code> 为当前滚动位置生成集群</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 为当前滚动位置生成集群
 * @param {array} rows 接收到的数据列表
 * @return {object} { 集群以上未渲染数据，集群以下未渲染数据，开始的行数（不确定），需要展示的数据 }
 * */</span> 
</code></pre></div><ol><li>数据行数 &lt; 单块行数时，返回 <code>{0, 0, 0, 当前数据 || 生成空行}</code></li> <li>否则
<ol><li>开始的行数（序列号） = (总行数 - 单块行数) * 当前集群块编号 || 0
<ul><li>开始行数为0时，序列号为1</li></ul></li> <li>结束的行数 = 开始的行数 + 单块行数</li> <li>隐藏的上半部分高度 = 开始的行数 * 单行高 || 0</li> <li>隐藏的下半部分高度 = （总行数-结束的行数） * 单行高 || 0</li> <li>返回 <code>{, , , rows[开始的行数--结束的行数]}</code></li></ol></li></ol> <blockquote><p>怎样获取当前集群块编号呢？</p></blockquote> <h4 id="_5-getclusternum-获取当前集群块编号"><a href="#_5-getclusternum-获取当前集群块编号" class="header-anchor">#</a> 5. <code>getClusterNum()</code> 获取当前集群块编号</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取当前集群块编号
 * @param {array} rows 构造函数传入的数据列表
 * @return {string} 当前集群块编号
 * */</span> 
</code></pre></div><ol><li>计算出 <strong>滚动距离 / (集群高度 - 单块高)</strong> 的值</li></ol> <h2 id="附加"><a href="#附加" class="header-anchor">#</a> 附加</h2> <h3 id="模块化规范"><a href="#模块化规范" class="header-anchor">#</a> 模块化规范</h3> <p><a href="https://www.jianshu.com/p/30f53349a1c4" target="_blank" rel="noopener noreferrer">写一个适应所有环境的js模块<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th style="text-align:center;">规范</th> <th style="text-align:center;">框架</th> <th style="text-align:center;">定义与引入</th></tr></thead> <tbody><tr><td style="text-align:center;">CommonJS</td> <td style="text-align:center;">node.js</td> <td style="text-align:center;"><code>module.exports</code> + <code>require()</code></td></tr> <tr><td style="text-align:center;">AMD</td> <td style="text-align:center;">require.js</td> <td style="text-align:center;"><code>define</code> + <code>require()</code></td></tr> <tr><td style="text-align:center;">CMD</td> <td style="text-align:center;">sea.js</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">ES Module</td> <td style="text-align:center;">ES6</td> <td style="text-align:center;"></td></tr></tbody></table> <h4 id="_1-nodejs-commonjs规范"><a href="#_1-nodejs-commonjs规范" class="header-anchor">#</a> 1.nodejs -- CommonJS规范</h4> <blockquote><p>Commonjs：让js不止运行在浏览器</p></blockquote> <ul><li>CommonJS 规范定义了3个全局变量：
<ul><li><code>require</code> 用于引入一个模块</li> <li><code>exports</code> 对外暴露模块的接口，可以是任何类型</li> <li><code>module</code> 是这个模块本身的对象</li></ul></li></ul> <h4 id="_2-浏览器-cmd-amd-规范"><a href="#_2-浏览器-cmd-amd-规范" class="header-anchor">#</a> 2. 浏览器 -- CMD AMD 规范</h4> <ul><li>CMD、AMD 规范定义了全局函数 <code>define()</code> 来创建一个模块</li></ul> <h3 id="this-指向"><a href="#this-指向" class="header-anchor">#</a> this 指向</h3> <ul><li>this指向由函数调用的方式决定</li></ul> <table><thead><tr><th style="text-align:center;">调用方式</th> <th style="text-align:center;">举例</th> <th style="text-align:center;">this 指向</th></tr></thead> <tbody><tr><td style="text-align:center;">普通函数调用</td> <td style="text-align:center;"><code>f()</code></td> <td style="text-align:center;">window   严格模式 undefined</td></tr> <tr><td style="text-align:center;">对象方法调用</td> <td style="text-align:center;"><code>o.f()</code></td> <td style="text-align:center;">o</td></tr> <tr><td style="text-align:center;">构造函数调用</td> <td style="text-align:center;"><code>new f()</code></td> <td style="text-align:center;">当前的实例对象</td></tr> <tr><td style="text-align:center;">函数上下文</td> <td style="text-align:center;"><code>call apply bind</code></td> <td style="text-align:center;">第一个参数</td></tr></tbody></table> <h3 id="元素的-tabindex-属性"><a href="#元素的-tabindex-属性" class="header-anchor">#</a> 元素的 tabIndex 属性</h3> <ul><li><p><code>tabIndex</code> 属性指示该元素是否聚焦，以及相关的顺序键盘导航</p></li> <li><p>属性值：</p> <ul><li>负数：可聚焦，不参与键盘导航</li> <li>0：可聚焦，可通过键盘导航聚焦至该元素，其相对顺序是当前所处的 DOM 结构决定</li> <li>正数：可聚焦，可通过键盘导航聚焦至该元素，其相对顺序按照 <code>tabindex</code> 值递增而滞后获焦</li></ul></li></ul> <h3 id="css-属性-pointer-events"><a href="#css-属性-pointer-events" class="header-anchor">#</a> css 属性 <code>pointer-events</code></h3> <ul><li><p>指定在什么情况下某个特定的图形元素可以成为鼠标事件的 <code>target</code></p></li> <li><p><code>pointer-events: auto;</code>：默认属性值</p></li> <li><p><code>pointer-events: none;</code>：元素永远不会成为鼠标事件的 <code>target</code></p></li></ul> <h3 id="缺陷"><a href="#缺陷" class="header-anchor">#</a> 缺陷</h3> <p>默认渲染条数 = 每块的条数 * 多少块，当渲染条数不足时出现白屏。
默认渲染下一屏 = 屏幕高度达到当前集群的最后一块，当渲染不及时时也出现白屏。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.caadd38c.js" defer></script><script src="/assets/js/2.2defd20b.js" defer></script><script src="/assets/js/12.c2622d7c.js" defer></script>
  </body>
</html>
